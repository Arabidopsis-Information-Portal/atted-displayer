<!DOCTYPE html>
<html>

<head>
    <script charset="utf-8" type="text/javascript" src="build/atted-displayer-1.2.0.js"></script>
    <link rel="stylesheet" type="text/css" href="https://bar.utoronto.ca/araport/CDN/js/intermine/im-tables/latest/main.css">
    <script charset="UTF-8" type="text/javascript" src="https://bar.utoronto.ca/araport/CDN/js/intermine/im-tables/latest/imtables.min.js"></script>
</head>

<body>

    <div id="displayercontainer"></div>

    <div id="query-container" style="display: block; height: 300px">
        <p class="apology">Please be patient while the results of your query are retrieved.</p>
    </div>

    <script type="text/javascript">
        var callback = function(values) {

            var options = {
                type: 'table',
                url: 'https://bar.utoronto.ca/thalemine',
                query: {
                    "model": {
                        "name": "genomic"
                    },
                    "select": ["Gene.primaryIdentifier", "Gene.symbol", "Gene.name", "Gene.organism.shortName"],
                    "orderBy": [{
                        "Gene.primaryIdentifier": "ASC"
                    }],
                    "where": [{
                        "path": "Gene.primaryIdentifier",
                        "op": "ONE OF",
                        "code": "A",
                        "values": values
                    }]
                }
            };

            if (values == null || values.length < 1) {
                jQuery('#query-container').html("No Results");
            } else {
                jQuery('#query-container').imWidget(options);
            }

        }

        var queryhook = function() {
            console.log("prehook fired...");
        }

        var opts = {
            target: '#displayercontainer',
            AGIcode: 'at3g24650',
            cutoff: 20,
            guarantee: 10,
            service: "https://bar.utoronto.ca/thalemine/service",
            atted: "http://127.0.0.1:5000/proxy/atted_api4/"
        }

        var displayer = new AttedDisplayer(opts, callback, queryhook);
    </script>

</body>

</html>
